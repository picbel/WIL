// Metadata:
:description: Week I Learnt
:keywords: study, til, lwil
// Settings:
:doctype: book
:toc: left
:toclevels: 4
:sectlinks:
:icons: font
:hardbreaks:

---
https://github.com/picbel/WIL/blob/main/2025/06/wil.adoc[이전 달]
https://github.com/picbel/WIL/blob/main/2025/08/wil.adoc[다음 달]

[[section-202507]]
== 2025년 7월

[[section-202507-5일]]
5일
===
### Spring application에서 초기화 로직 등록

스프링에서 애플리케이션이 최초로 시작될 때 한번만 실행되기 위한 초기화 로직이 필요한 경우가 있다.
이때 가장 권장되는 방식이 `@EventListener(ApplicationReadyEvent.class)` 방식이다
```kotlin
@Component
class WarmUpRunner {

    @EventListener(ApplicationReadyEvent::class)
    fun onApplicationReady() {
        // 앱 시작 후 실행할 로직 (웜업, 캐시 적재 등)
        println("애플리케이션 준비 완료. 웜업 시작.")
    }
}
```
ApplicationReadyEventsms Spring Application이 완전히 초기화된 후** 실행된다.
@PostConstruct보다 **모든 Bean이 준비된 이후**이므로 더 안전하다.

다른방법들과 간단 요약
[cols="3,3,4", options="header"]
|===
| 어노테이션 / 방식
| 실행 시점
| 적합한 용도

| `@EventListener(ApplicationReadyEvent.class)`
| 모든 빈 로딩 완료 후
| 웜업, 캐시 적재 등 초기화 로직

| `@PostConstruct`
| 빈 생성 직후
| 간단한 필드 초기화 용도에 적합

| `CommandLineRunner` / `ApplicationRunner`
| 애플리케이션 시작 직후(모든 빈이 초기화되었다는걸 보장하지 않는다.)
| 커맨드라인 기반 초기화
|===


---
[[section-202507-11일]]
11일
===
### Java의 Seald, Permits, non-sealed

Java 17부터 지원하는 Seald, Permits, non-sealed

#### Sealed 클래스/인터페이스 (sealed)
- 특정 클래스나 인터페이스가 누가 상속/구현할 수 있는지 제한한다.
- extends/implements 가능한 하위 타입을 명시적으로 permits 절에서 선언해야 한다.
- 목적: 상속 계층을 통제해서 안전한 패턴 매칭, 유지보수 용이성을 보장.

```java
public sealed class Shape permits Circle, Rectangle, Triangle {
    // ...
}
```

#### Permits (permits)
- sealed 클래스나 인터페이스의 허용된 하위 클래스/인터페이스를 나열한다.
- 하위 클래스들은 반드시 같은 모듈(모듈 시스템 사용 시), 같은 패키지(모듈 시스템 미사용 시) 안에 존재해야 합니다.

```java
public sealed interface Animal permits Dog, Cat { }

final class Dog implements Animal { }
final class Cat implements Animal { }
```

#### Non-sealed (non-sealed)
- sealed 계층에 속하지만, 더 이상 제한을 두지 않고 자유롭게 상속 가능하게 만든다.
- sealed와 final의 중간 역할. 즉, 특정 타입까지만 제한하고, 그 밑에서는 확장 자유를 허용.
```java
public sealed class Vehicle permits Car, Bus { }

public final class Car extends Vehicle { }       // 더 확장 불가
public non-sealed class Bus extends Vehicle { }  // Bus는 누구든 상속 가능
```

---
[[section-202507-13일]]
13일
===
### synchronized 락 대상 별 범위 정리



| 위치                              | 락 대상                        | 설명                                  |
| ------------------------------- | --------------------------- | ----------------------------------- |
| `synchronized(instance) {}`     | **해당 객체(instance)**         | 해당 객체에 대해 동기화. 같은 인스턴스를 기준으로 락 공유   |
| `synchronized static method`    | **클래스 객체(Class.class)**     | 클래스 단위로 락이 걸림. 인스턴스가 달라도 락은 동일      |
| `synchronized instance method`  | **해당 인스턴스(this)**           | 인스턴스 단위로 락이 걸림. 인스턴스가 다르면 락도 별개     |
| `synchronized(SomeClass.class)` | **클래스 객체(SomeClass.class)** | 클래스 단위로 락이 걸림. static 메서드와 동일한 락 대상 |
| `synchronized(this) {}`         | **현재 인스턴스**                 | 인스턴스 메서드에서 내부 블록 동기화 시 사용           |
| `synchronized(lockObj) {}`      | **명시한 lock 객체**             | 락 범위를 명확히 지정 가능. 유연한 동기화 처리 가능      |


---
[[section-202507-26일]]
26일
===
